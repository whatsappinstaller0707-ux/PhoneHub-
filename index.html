<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PhoneHub Pro</title>
  
  <meta name="theme-color" content="#0f172a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/whatsappinstaller0707-ux/PhoneHub-/main/icon-512.png">
  <link rel="manifest" href="manifest.json">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <style>
    /* --- GATEKEEPER STYLES --- */
    #gatekeeper {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #0f172a;
      color: white;
      z-index: 9999;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      transition: top 0.6s ease-in-out;
      font-family: 'Inter', sans-serif;
      text-align: center;
    }
    #gatekeeper.hidden { top: -100%; }
    .welcome-card { max-width: 400px; padding: 30px; background: rgba(30, 41, 59, 0.7); border-radius: 24px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); }
    .gk-btn { padding: 14px 24px; margin: 10px; cursor: pointer; border-radius: 12px; border: none; font-weight: bold; width: 80%; }
    .gk-primary { background: #38bdf8; color: #0f172a; }
    .gk-secondary { background: #334155; color: white; }
    #userNameInput { padding: 12px; width: 80%; margin-bottom: 10px; border-radius: 10px; border: 1px solid #334155; background: #000; color: white; }

    /* --- PWA LIVE BADGE --- */
    .status-badge {
        display: inline-flex; align-items: center; gap: 6px;
        background: rgba(34, 197, 94, 0.2); color: #22c55e;
        padding: 4px 12px; border-radius: 20px; font-size: 10px;
        font-weight: bold; margin-bottom: 10px;
    }
    .pulse-dot { width: 6px; height: 6px; background: #22c55e; border-radius: 50%; animation: pulse 1.5s infinite; }
    @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.5); opacity: 0.5; } 100% { transform: scale(1); opacity: 1; } }

    /* --- ORIGINAL THEME STYLES --- */
    :root {
      --bg: #0f172a; --card: rgba(30, 41, 59, 0.7); --accent: #38bdf8;
      --text: #ffffff; --text-dim: #94a3b8; --border: rgba(255, 255, 255, 0.1);
      --nav-bg: rgba(15, 23, 42, 0.95); --chip-active: rgba(56, 189, 248, 0.2);
      --news-gold: #fbbf24; --danger: #ef4444; --link-blue: #60a5fa;
    }
    [data-theme="light"] {
      --bg: #f8fafc; --card: #ffffff; --accent: #0284c7;
      --text: #0f172a; --text-dim: #64748b; --border: #e2e8f0;
      --nav-bg: rgba(255, 255, 255, 0.95); --chip-active: rgba(2, 132, 199, 0.1);
    }

    body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); transition: 0.3s; padding-bottom: 110px; overflow-x: hidden; }
    header { padding: 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top:0; background: var(--bg); z-index: 100; }
    header h1 { font-size: 22px; margin: 0; color: var(--accent); font-weight: 800; }
    
    .section { padding: 0 20px 20px; }
    h3 { font-size: 11px; text-transform: uppercase; color: var(--text-dim); margin-bottom: 12px; letter-spacing: 1px; font-weight: 700; }

    .news-scroll { display: flex; gap: 15px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none; margin-bottom: 10px; }
    .news-scroll::-webkit-scrollbar { display: none; }
    .news-card { min-width: 260px; background: var(--card); border: 1px solid var(--border); padding: 15px; border-radius: 16px; position: relative; }
    .news-tag { position: absolute; top: 12px; right: 12px; font-size: 9px; background: var(--news-gold); color: #000; padding: 2px 8px; border-radius: 10px; font-weight: bold; }
    .news-card h4 { margin: 20px 0 8px; font-size: 14px; }
    .news-card p { font-size: 12px; color: var(--text-dim); margin: 0; }

    .category-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
    .cat-card { background: var(--card); border: 1px solid var(--border); padding: 18px; border-radius: 16px; text-align: center; cursor: pointer; }
    .cat-card i { font-size: 28px; color: var(--accent); margin-bottom: 6px; }
    .cat-card span { display: block; font-size: 12px; font-weight: 600; }

    .urgent-banner { background: linear-gradient(135deg, #ef4444, #991b1b); color: white; padding: 15px; border-radius: 12px; margin-bottom: 25px; display: flex; align-items: center; gap: 12px; cursor: pointer; }

    .list-item { background: var(--card); border: 1px solid var(--border); padding: 16px; border-radius: 12px; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center; justify-content: space-between; }
    .list-item i.link-icon { color: var(--link-blue); font-size: 20px; }
    
    .resource-card { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 20px; margin-top: 20px; }
    .resource-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 15px; }
    .res-item { display: flex; flex-direction: column; align-items: center; text-decoration: none; gap: 8px; }
    .res-circle { width: 50px; height: 50px; border-radius: 50%; background: var(--chip-active); border: 1px solid var(--accent); display: flex; align-items: center; justify-content: center; color: var(--accent); transition: 0.2s; }
    .res-item span { font-size: 10px; color: var(--text-dim); font-weight: 600; text-align: center; }
    .res-item:active .res-circle { transform: scale(0.9); background: var(--accent); color: white; }

    .detail-view { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 2000; padding: 25px; box-sizing: border-box; overflow-y: auto; }
    .detail-view.active { display: block; animation: slideUp 0.3s ease-out; }
    @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
    
    .back-btn { display: flex; align-items: center; gap: 8px; color: var(--accent); cursor: pointer; margin-bottom: 20px; font-weight: bold; }
    .step-box { margin-bottom: 12px; padding: 15px; background: var(--card); border-radius: 12px; border-left: 4px solid var(--accent); font-size: 14px; }

    nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 400px; background: var(--nav-bg); backdrop-filter: blur(15px); border: 1px solid var(--border); border-radius: 30px; display: flex; justify-content: space-around; padding: 12px 0; z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
    nav div { color: var(--text-dim); cursor: pointer; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
    nav div.active { color: var(--accent); background: var(--chip-active); }

    .page { display: none; }
    .active-page { display: block; }
  </style>
</head>
<body data-theme="dark">

<div id="gatekeeper">
  <div class="welcome-card">
    <i class="material-icons-round" style="font-size: 50px; color: #38bdf8; margin-bottom: 10px;">phonelink_setup</i>
    <h1>PhoneHub Pro</h1>
    <p style="color: #94a3b8; margin-bottom: 20px;">Your ultimate repair companion.</p>
    <div id="choiceButtons">
      <button class="gk-btn gk-primary" onclick="showNameInput()">Create Profile</button>
      <button class="gk-btn gk-secondary" onclick="enterAsGuest()">Guest Access</button>
    </div>
    <div id="nameInputGroup" style="display: none;">
      <input type="text" id="userNameInput" placeholder="Enter your name">
      <button class="gk-btn gk-primary" onclick="saveProfile()">Start Now</button>
    </div>
  </div>
</div>

<header>
  <h1 id="mainTitle">PhoneHub</h1>
  <div style="display: flex; gap: 15px;">
    <i class="material-icons-round" onclick="toggleTheme()" id="theme-icon" style="cursor:pointer">light_mode</i>
    <i class="material-icons-round" onclick="signOut()" style="cursor:pointer">logout</i>
  </div>
</header>

<main>
  <div id="homePage" class="page active-page">
    <div class="section">
      <h3>Tech News 2026</h3>
      <div class="news-scroll">
        <div class="news-card"><span class="news-tag">PATCH</span><h4>Security Alert</h4><p>Android Jan 2026 patch fixes critical kernel bugs. Update now.</p></div>
        <div class="news-card"><span class="news-tag">TIPS</span><h4>New Pro Tips</h4><p>Digital Wellbeing, Screen Pinning & more added to database.</p></div>
        <div class="news-card"><span class="news-tag">NEW</span><h4>WhatsApp News</h4><p>Usernames are now rolling out for global accounts.</p></div>
      </div>
      <div class="urgent-banner" onclick="openDetail(9)">
        <i class="material-icons-round">water_drop</i>
        <div><div style="font-weight:bold">Urgent: Wet Phone?</div><div style="font-size:12px">Click for emergency recovery steps.</div></div>
      </div>
      <h3>Diagnostic Dashboard</h3>
      <div class="category-grid">
        <div class="cat-card" onclick="showCategory('Performance')"><i class="material-icons-round">speed</i><span>Performance</span></div>
        <div class="cat-card" onclick="showCategory('Connectivity')"><i class="material-icons-round">wifi</i><span>Network</span></div>
        <div class="cat-card" onclick="showCategory('Account')"><i class="material-icons-round">vpn_key</i><span>Account</span></div>
        <div class="cat-card" onclick="showCategory('Hardware')"><i class="material-icons-round">build</i><span>Hardware</span></div>
      </div>
      <h3>Popular Repairs</h3>
      <div id="featuredFixes"></div>
    </div>
  </div>

  <div id="fixesPage" class="page"><div class="section"><h3>All Repair Guides</h3><div id="masterFixList"></div></div></div>
  <div id="tipsPage" class="page"><div class="section"><h3>Pro Tips & Maintenance</h3><div id="fullTipsList"></div></div></div>

  <div id="linksPage" class="page">
    <div class="section">
      <h3>Support & Updates</h3>
      <div class="list-item" onclick="window.open('https://www.whatsapp.com/contact')"><div><strong>WhatsApp Support</strong><br><small>Direct help & Ban reviews</small></div><i class="material-icons-round link-icon">contact_support</i></div>
      <div class="list-item" onclick="window.open('https://support.google.com')"><div><strong>Google Support</strong><br><small>Android & Gmail help</small></div><i class="material-icons-round link-icon">search</i></div>
      <div class="list-item" onclick="window.open('https://support.apple.com/icloud')"><div><strong>iCloud Support</strong><br><small>Apple ID & Storage recovery</small></div><i class="material-icons-round link-icon">cloud</i></div>
      <div class="list-item" onclick="window.open('https://www.facebook.com')"><div><strong>Facebook Official</strong><br><small>Visit facebook.com</small></div><i class="material-icons-round link-icon">facebook</i></div>
      <div class="list-item" onclick="window.open('https://play.google.com/store/apps/details?id=com.google.android.gms')"><div><strong>Play Store Update</strong><br><small>Update System Services</small></div><i class="material-icons-round link-icon">system_update</i></div>
      <div class="list-item" onclick="window.open('https://play.google.com/store/apps/details?id=com.whatsapp')"><div><strong>WhatsApp Messenger</strong><br><small>Get latest version</small></div><i class="material-icons-round link-icon">chat</i></div>
      <div class="list-item" onclick="window.open('https://play.google.com/store/apps/details?id=com.whatsapp.w4b')"><div><strong>WhatsApp Business</strong><br><small>Update Business tools</small></div><i class="material-icons-round link-icon">business_center</i></div>
      <div class="resource-card">
        <h3>More Links</h3>
        <div class="resource-grid">
            <a href="https://www.vidmate.com/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">file_download</i></div><span>VidMate</span></a>
            <a href="https://apkpure.com/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">android</i></div><span>APKPure</span></a>
            <a href="https://www.youtube.com/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">play_circle</i></div><span>YouTube</span></a>
            <a href="https://moviebox.ph/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">movie</i></div><span>MovieBox</span></a>
            <a href="https://www.4fnet.org/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">language</i></div><span>4FNet</span></a>
            <a href="https://ninite.com/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">auto_fix_high</i></div><span>Ninite</span></a>
            <a href="https://getintopc.com/" class="res-item" target="_blank"><div class="res-circle"><i class="material-icons-round">computer</i></div><span>GetIntoPC</span></a>
        </div>
      </div>
    </div>
  </div>

  <div id="communityPage" class="page">
    <div class="section">
      <h3>PhoneHub Pro Lounge</h3>
      <div class="status-badge"><div class="pulse-dot"></div> LOUNGE ACTIVE</div>
      <div style="background: #5865F2; color: white; padding: 25px; border-radius: 20px; text-align: center; margin-bottom: 25px;">
        <i class="material-icons-round" style="font-size: 48px; margin-bottom: 10px;">forum</i>
        <h2 style="margin: 0;">Join the Community</h2>
        <p style="opacity: 0.9; font-size: 14px; margin: 10px 0 20px;">Get real-time repair help from pro technicians.</p>
        <a href="https://discord.gg/SDCDzKTHVb" target="_blank" style="text-decoration: none;">
          <button style="background: white; color: #5865F2; border: none; padding: 12px 30px; border-radius: 12px; font-weight: 800; cursor: pointer; display: flex; align-items: center; gap: 10px; margin: 0 auto;">
            <img src="https://cdn-icons-png.flaticon.com/512/2111/2111370.png" width="20"> OPEN DISCORD LOUNGE
          </button>
        </a>
      </div>
      <h3>Recent Discussion</h3>
      <textarea id="communityInput" placeholder="Quick question for the mods..." style="width:100%; height:80px; padding:12px; border-radius:12px; background:var(--card); border:1px solid var(--border); color:white; box-sizing: border-box;"></textarea>
      <button onclick="postToDiscord()" style="width:100%; background:var(--accent); color:white; border:none; padding:12px; border-radius:12px; font-weight:bold; margin-top:10px; cursor:pointer;">Post to Discord</button>
    </div>
  </div>
</main>

<div id="detailOverlay" class="detail-view">
    <div class="back-btn" onclick="closeDetail()"><i class="material-icons-round">arrow_back</i> BACK</div>
    <h2 id="detailTitle"></h2><div id="detailContent"></div>
</div>

<nav>
  <div id="nav-home" class="active" onclick="showPage('home')"><i class="material-icons-round">home</i></div>
  <div id="nav-tips" onclick="showPage('tips')"><i class="material-icons-round">lightbulb</i></div>
  <div id="nav-fixes" onclick="showPage('fixes')"><i class="material-icons-round">construction</i></div>
  <div id="nav-links" onclick="showPage('links')"><i class="material-icons-round">link</i></div>
  <div id="nav-community" onclick="showPage('community')"><i class="material-icons-round">groups</i></div>
</nav>

<script>
  // PWA Registration
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => { navigator.serviceWorker.register('sw.js').catch(() => {}); });
  }

  // Discord Function
  async function postToDiscord() {
    const messageInput = document.getElementById('communityInput');
    const message = messageInput.value.trim();
    const userName = localStorage.getItem("userName") || "Guest";
    const webhookURL = "https://discord.com/api/webhooks/1459097197965738098/QSdb8ptWtBm2z0PJ4yG1RISj6Am2B1St1YTaivE8_ZSnBZtFTNiJSafdn9BXUNwdYNVf"; 
    if (!message) return alert("Please type a question!");
    try {
        const response = await fetch(webhookURL, {
            method: 'POST', headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                username: "PhoneHub Pro Lounge",
                avatar_url: "https://cdn-icons-png.flaticon.com/512/2111/2111370.png",
                content: `**New Community Question**\n**User:** ${userName}\n**Message:** ${message}`
            })
        });
        if (response.ok) { alert("✅ Posted to Discord!"); messageInput.value = ""; }
    } catch (error) { alert("❌ Failed to connect."); }
  }

  // REPAIR DATABASE (Full 25)
  const repairDb = [
    { id: 1, cat: "Performance", title: "1. Slow Phone Performance", steps: ["Close background apps.", "Clear system cache.", "Uninstall unused apps.", "Check for storage space."] },
    { id: 2, cat: "Performance", title: "2. Bad Battery Life", steps: ["Dim brightness.", "Disable GPS/Bluetooth.", "Enable Power Saver.", "Check battery usage settings."] },
    { id: 3, cat: "Performance", title: "3. Overheating Phone", steps: ["Remove case.", "Stop gaming/streaming.", "Keep away from sunlight.", "Check for rogue background apps."] },
    { id: 4, cat: "Performance", title: "4. Full Storage Space", steps: ["Delete WhatsApp media.", "Use Cloud storage.", "Clear app cache.", "Empty trash folder."] },
    { id: 5, cat: "Performance", title: "5. App Crashes/Freezes", steps: ["Force stop app.", "Clear app data.", "Check for updates.", "Restart phone."] },
    { id: 6, cat: "Hardware", title: "6. Force Restart (iPhone)", steps: ["Vol Up, Vol Down, then Hold Power."] },
    { id: 7, cat: "Hardware", title: "7. Force Restart (Android)", steps: ["Hold Power + Vol Down for 15s."] },
    { id: 8, cat: "Connectivity", title: "8. Apps Not Downloading", steps: ["Check WiFi.", "Clear Play Store cache.", "Check Date/Time settings."] },
    { id: 9, cat: "Hardware", title: "9. Wet Cell Phone Fix", steps: ["Power OFF.", "Dry with towel.", "Submerge in Silica/Rice 48h."] },
    { id: 10, cat: "Hardware", title: "10. MicroSD Card Fail", steps: ["Clean contacts.", "Format on PC.", "Re-insert and restart."] },
    { id: 11, cat: "Hardware", title: "11. Damaged Charging Port", steps: ["Clean with toothbrush.", "Try new cable.", "Use wireless charging."] },
    { id: 12, cat: "Connectivity", title: "12. WiFi Won't Connect", steps: ["Forget network.", "Restart Router.", "Reset Network Settings."] },
    { id: 13, cat: "Connectivity", title: "13. Bluetooth Issues", steps: ["Unpair device.", "Toggle Bluetooth.", "Reset settings."] },
    { id: 14, cat: "Account", title: "14. Syncing Failures", steps: ["Check internet.", "Toggle Auto-Sync.", "Re-add Account."] },
    { id: 15, cat: "Connectivity", title: "15. Unsent Messages", steps: ["Check signal.", "Clear SMS app cache.", "Check SIM status."] },
    { id: 16, cat: "Hardware", title: "16. Control Center Bug", steps: ["Toggle 'Access Within Apps'.", "Restart phone."] },
    { id: 17, cat: "Hardware", title: "17. iPhone Black Screen", steps: ["Force Restart.", "Charge for 30m.", "Check PC Recovery."] },
    { id: 18, cat: "Connectivity", title: "18. App Store Error", steps: ["Check VPN status.", "Sign out/in Apple ID.", "Reset Network."] },
    { id: 19, cat: "Performance", title: "19. WhatsApp Updating", steps: ["Go to Play Store.", "Search WhatsApp.", "Tap Update."] },
    { id: 20, cat: "Account", title: "20. WhatsApp Ban Recovery", steps: ["Request Review.", "Email support.", "Delete GBWhatsApp."] },
    { id: 21, cat: "Performance", title: "21. Check App Updates", steps: ["Store > Manage Apps > Updates."] },
    { id: 22, cat: "Account", title: "22. Gmail Recovery", steps: ["Visit g.co/recover.", "Use trusted device."] },
    { id: 23, cat: "Account", title: "23. Contact Google", steps: ["support.google.com.", "Select product.", "Contact Us."] },
    { id: 24, cat: "Hardware", title: "24. Screen Not Responding", steps: ["Clean surface.", "Remove protector.", "Force restart."] },
    { id: 25, cat: "Connectivity", title: "25. Mobile Data Fix", steps: ["Check balance.", "Verify APN.", "Toggle Airplane Mode."] }
  ];

  // TIPS DATABASE (Full 24)
  const tipsDb = [
    { title: "1. Uninstall Apps You Don’t Need", desc: "Long-press icon > App Info > Uninstall." },
    { title: "2. Use Digital Wellbeing", desc: "Use Bedtime mode and Focus mode to block distracting apps." },
    { title: "3. Your Phone App (Windows)", desc: "Link Android to Windows via Phone Link for calls and texts." },
    { title: "4. Edit Quick Settings", desc: "Use the pencil icon to move Dark Mode to the first row." },
    { title: "5. Install Apps From Web", desc: "Visit play.google.com on a browser to install apps remotely." },
    { title: "6. Install From Other Sources", desc: "Sideload APKs from official sites like Fortnite." },
    { title: "7. Install a Launcher App", desc: "Use Nova or Niagara to completely change your UI." },
    { title: "8. Customize Notifications", desc: "Set contacts to Priority and use Bubbles." },
    { title: "9. Add Widgets", desc: "Long-press home screen > Widgets to customize layout." },
    { title: "10. Beef Up Storage", desc: "Use microSD or USB-C flash drives to expand storage." },
    { title: "11. Install Antivirus", desc: "Bitdefender or Norton helps prevent malware." },
    { title: "12. Double-Tap Camera", desc: "Double-tap Power button to open camera instantly." },
    { title: "13. Use Screen Pinning", desc: "Lock a guest into one app via multitasking view." },
    { title: "14. Set Up Guest Access", desc: "Settings > System > Multiple Users for a safe space." },
    { title: "15. Record Screen Activity", desc: "Use built-in Screen Record from the quick shade." },
    { title: "16. Developer Options", desc: "Tap 'Build Number' 7x. Change animations to 0.5x." },
    { title: "17. Find My Device", desc: "Ensure this is active to locate or wipe your phone." },
    { title: "18. Battery Saver Mode", desc: "Set schedules for Battery Saver and use AI optimization." },
    { title: "19. Control Smart Home", desc: "Long-press Power for Quick Home Controls." },
    { title: "20. Update Frequently", desc: "Install security patches immediately for latest features." },
    { title: "21. Per-App Language", desc: "Set different languages for specific apps in Settings." },
    { title: "22. Material You", desc: "UI buttons and icons will match your background colors." },
    { title: "23. Emergency SOS", desc: "Click Power 5x to call emergency services instantly." },
    { title: "24. Record & Transcribe", desc: "Use Google Recorder for live, accurate text transcription." }
  ];

  function renderFixList(list, target = 'masterFixList') {
    document.getElementById(target).innerHTML = list.map(f => `
      <div class="list-item" onclick="openDetail(${f.id})">
        <div><strong>${f.title}</strong><br><small style="color:var(--text-dim)">${f.cat}</small></div>
        <i class="material-icons-round" style="color:var(--accent)">chevron_right</i>
      </div>`).join('');
  }

  function renderTips() {
    document.getElementById('fullTipsList').innerHTML = tipsDb.map(t => `
      <div class="list-item" style="flex-direction:column; align-items:flex-start;">
        <strong>${t.title}</strong><p style="font-size:13px; color:var(--text-dim); margin-top:5px;">${t.desc}</p>
      </div>`).join('');
  }

  function showCategory(cat) { showPage('fixes'); renderFixList(repairDb.filter(f => f.cat === cat)); }

  function openDetail(id) {
    const fix = repairDb.find(f => f.id === id);
    if(!fix) return;
    document.getElementById('detailTitle').innerText = fix.title;
    let contentHtml = fix.steps.map(s => `<div class="step-box">${s}</div>`).join('');
    contentHtml += `<button onclick="showPage('community'); closeDetail();" style="width:100%; background:var(--chip-active); color:var(--accent); border:1px solid var(--accent); padding:12px; border-radius:12px; font-weight:bold; margin-top:20px; cursor:pointer;">Ask Community</button>`;
    document.getElementById('detailContent').innerHTML = contentHtml;
    document.getElementById('detailOverlay').classList.add('active');
  }

  function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
    document.getElementById(id + 'Page').classList.add('active-page');
    document.querySelectorAll('nav div').forEach(d => d.classList.remove('active'));
    document.getElementById('nav-' + id).classList.add('active');
  }

  function closeDetail() { document.getElementById('detailOverlay').classList.remove('active'); }
  function toggleTheme() {
    const isDark = document.body.getAttribute('data-theme') === 'dark';
    document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
    document.getElementById('theme-icon').innerText = isDark ? 'dark_mode' : 'light_mode';
  }

  // INIT
  renderFixList(repairDb.slice(0, 5), 'featuredFixes');
  renderFixList(repairDb);
  renderTips();

  window.addEventListener('DOMContentLoaded', () => {
    const user = localStorage.getItem("userName");
    if (user) {
        document.getElementById("gatekeeper").classList.add("hidden");
        document.getElementById("mainTitle").innerText = (user === "guest") ? "PhoneHub: Guest" : "PhoneHub: " + user;
    }
  });

  function showNameInput() { 
    document.getElementById("choiceButtons").style.display = "none";
    document.getElementById("nameInputGroup").style.display = "block";
  }

  function saveProfile() {
    const val = document.getElementById("userNameInput").value.trim();
    if (val) { localStorage.setItem("userName", val); location.reload(); }
  }

  function enterAsGuest() { localStorage.setItem("userName", "guest"); location.reload(); }
  function signOut() { localStorage.removeItem("userName"); location.reload(); }
</script>
</body>
</html>
